# 한경 컨센서스 상향 내역 수집 & 분야 시각화
- 목표 : 보고서 내용 배제 & 상향 보고서가 나온 기업 및 분야를 웹 스크래핑 & 시각화
    - 아이디어 : 어떤 분야의 기업들에 대한 상향 전망이 나온다 -> 해당 산업이 흥한다고 볼 수 있지 않을까?
    - 데이터 수집 : 웹 스크래핑(`requests`, `bs4`, `selenium`)
        - 편의상 데이터 수집은 `2022년 5월 1일`부터 수집하고 하루 단위로 갱신 (사이트에 과한 부하를 주지 않게 하기 위함도 있음)
    - 수집한 데이터는 `SQL`을 이용하여 저장 & 조회
        - 저장할 내용 : 기업명, 산업, 발행 증권사
    - 시각화는 그냥 간단하게 막대그래프로 조회가 될 듯
        - 조회할 때 같은 기업이 여러 번 조회되는 경우도 있을 것이니 보고서 수와 기업 수는 별도로 생각해야 함

# 해야 할 일
- 가져온 데이터들을 토대로 네이버 증권에서 <b>산업 분야</b>까지 가져온 뒤 DB에 저장
- DB는 `MySQL` 이나 `Sqlite3`을 쓸 것 같다. 후자?

# 일자별 진행 과정 
- 진행 기간 : `220803 ~ `

## 220803
1. `DataCollect.ipynb` : 한경 컨센서스에서 제목 가공 & 4가지 변수로 나눠 저장했음

    

## 시행착오

## 220803
1. VS code의 주피터 노트북 가상환경 설정하기
    - `.py` 파일과 달리 `.ipynb`는 가상환경에 자동으로 연결되지 않음
    - 가상환경을 만듦 -> `.ipynb` 파일 생성 -> `우측 상단 커널 가상환경으로 세팅`하면 끝임

2. 한경 컨센서스의 컨센서스 항목이 로그인을 요하게 됨 - [예전 사이트](http://hkconsensus.hankyung.com/apps.analysis/analysis.list?skinType=stock_good&sdate=2022-05-03&edate=2022-08-03&order_type=&now_page=1) 있어서 그걸로 하면 될 듯
    - `requests`로 접근하려 했으나, `form`이 없고 자바스크립트에 적힌 `login/ajaxActionLogin.do`로 접근해봤는데 먹히지 않음
    - 그래서 `Selenium`으로 시도해봄
    
3. 정규표현식 : 괄호 앞까지만 탐색 : `.+(?=\()` : `(?=)` 부분이 전방 탐색 부분이다 : `(?=`와 `)` 사이에 들어가는 문자 전까지 매치해줌
    - 즉 `탐색하고 싶은 문자 정규표현식``(?=[경계문자])` 으로 쓰면 된다.
